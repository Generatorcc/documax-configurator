<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Documax Market Based Analyzer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Force 50% Zoom effect via CSS scaling */
        html { 
            background-color: #0f172a; 
            zoom: 0.65; /* Better compatibility than transform for layout */
        }
        body { color: #f8fafc; font-family: sans-serif; }
        .card { background-color: #1e293b; border: 1px solid #334155; border-radius: 0.75rem; padding: 1.5rem; }
        .accent-purple { color: #a855f7; border-color: #a855f7; }
        input { background-color: #0f172a; border: 1px solid #475569; color: white; padding: 0.5rem; border-radius: 0.375rem; width: 100%; }
        
        /* Profit Status Colors */
        .profit-red { color: #ef4444; }    /* No Profit/Negative */
        .profit-yellow { color: #facc15; } /* Low Profit < 14.5% */
        .profit-green { color: #22c55e; }  /* Goal Met > 14.5% */
    </style>
</head>
<body class="p-8">
    <div class="max-w-7xl mx-auto space-y-6">
        
        <div class="flex justify-between items-center border-b pb-4 accent-purple">
            <h1 class="text-3xl font-bold uppercase tracking-widest text-purple-500">War Room: Profit Architect</h1>
            <div class="text-sm font-mono opacity-70">Documax v2.4.2</div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="card space-y-2 border-l-4 border-yellow-500">
                <h2 class="text-yellow-500 font-bold uppercase">Margin Math & Logic</h2>
                <p class="text-sm opacity-80">Hardware Load: <span class="text-white">34% Sales</span> | <span class="text-white">17.2% Admin</span></p>
            </div>

            <div class="card border-2 border-purple-500 flex flex-col items-center justify-center">
                <span class="text-xs uppercase tracking-widest opacity-70">Projected Operating Profit</span>
                <span id="profit-display" class="text-6xl font-bold profit-red">-2.9%</span>
                <span class="text-xs mt-2 opacity-50">Goal: 14.5% (Elite Performance)</span>
            </div>
        </div>

        <div class="card">
            <div class="grid grid-cols-2 md:grid-cols-3 gap-6">
                <div>
                    <label class="block text-xs mb-1 opacity-70 uppercase">Hardware Cost ($)</label>
                    <input type="number" id="hw-cost" value="4001" oninput="calculate()">
                </div>
                
                <div>
                    <label class="block text-xs mb-1 opacity-70 uppercase">Internal Color CPC</label>
                    <input type="number" id="color-cpc" value="0.0280" step="0.0001" oninput="calculate()">
                </div>
                <div>
                    <label class="block text-xs mb-1 opacity-70 uppercase">Admin Load (%)</label>
                    <input type="number" id="admin-load" value="17.2" oninput="calculate()">
                </div>
            </div>
        </div>
    </div>

    <script>
        function calculate() {
            const profitVal = parseFloat(document.getElementById('profit-display').innerText);
            const display = document.getElementById('profit-display');

            // PROFIT COLOR LOGIC
            display.classList.remove('profit-red', 'profit-yellow', 'profit-green');
            
            if (profitVal <= 0) {
                display.classList.add('profit-red'); // Red for negative/zero
            } else if (profitVal < 14.5) {
                display.classList.add('profit-yellow'); // Yellow for low profit
            } else {
                display.classList.add('profit-green'); // Green for elite profit
            }
        }

        // AUTO-LOAD HARDWARE COST FROM CONFIGURATOR
        window.onload = function() {
            const params = new URLSearchParams(window.location.search);
            const hwValue = params.get('hw') || localStorage.getItem('documax_hw');
            if (hwValue) {
                document.getElementById('hw-cost').value = hwValue;
            }
            calculate();
        };
    </script>
</body>
</html>
